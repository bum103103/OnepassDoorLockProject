<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>NFC 6자리 숫자 전송</title>
</head>
<body>
  <h1>NFC로 6자리 숫자 전송하기</h1>
  <input type="text" id="numberInput" maxlength="6" placeholder="6자리 숫자 입력">
  <button id="writeButton">NFC에 6자리 숫자 쓰기</button>
  <div id="log"></div>

  <script>
    // 로그 출력 함수
    function log(message) {
      const logDiv = document.getElementById("log");
      const logEntry = document.createElement("p");
      logEntry.textContent = message;
      logDiv.appendChild(logEntry);
    }

    // NFC 쓰기 기능
    const writeButton = document.getElementById("writeButton");
    writeButton.addEventListener("click", async () => {
      log("사용자가 NFC 쓰기 버튼을 클릭했습니다.");

      const number = document.getElementById("numberInput").value;
      if (number.length !== 6 || isNaN(number)) {
        alert('6자리 숫자를 입력해주세요.');
        return;
      }

      try {
        const ndef = new NDEFReader();
        await ndef.write(number);
        log(`> NFC 태그에 "${number}"가 기록되었습니다.`);
        alert('NFC 전송을 위해 기기를 태그에 가까이 대주세요.');
      } catch (error) {
        log("오류 발생: " + error);
        alert("NFC 기록 중 오류가 발생했습니다.");
      }
    });
  </script>
</body>
</html>
